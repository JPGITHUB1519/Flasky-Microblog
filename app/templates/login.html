{% extends "base.html" %}
{% block content %}
	<script type="text/javascript">
		function set_openid(openid, pr)
		{
			u = openid.search("<username>");
			if(u != -1)
			{
				// open id requires username
				user = prompt("Enter your " + pr + " username : ");
				openid = openid.substr(0, u) + user;
			}
			form = document.forms["login"];
			form.elements["openid"].value = openid;
		}
	</script>
	<!-- form = form object -->
	<h1>Sign In</h1>
	<form action="" method="post" name="login">
		<!-- will be replaced with a csrf prevention we have to put it in all of our forms -->
		{{ form.hidden_tag() }}
		<p>
			Please enter your OpenID : <br>
			<!-- {{form.field_name}} render the fields of wtf form-->
			{{ form.openid(size=80) }}
			<!-- show errors on validation -->
			{% for error in form.openid.errors %}
				<span style="color : red;">[{{ error }}]</span>
			{% endfor %}
			<br>
			|{% for pr in providers %}
				<a href="javascript:set_openid('{{ pr.url}}', '{{pr.name}}');">{{ pr.name }}</a>|
			{% endfor %}
		</p>
		<p> {{ form.remember_me }} Remember Me</p>
		<p><input type="submit" name="" value="Sign In"></p>
	</form>
{% endblock %}
